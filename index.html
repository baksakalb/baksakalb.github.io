<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MTG Turnuva Düzenleyici</title>
  <style>
    body {
      margin: 0;
      height: 100vh; /* Full viewport height */
      background: url('/path-to-image/background.jpg') no-repeat center center fixed;
      background-size: contain; /* Maintain aspect ratio and fit the entire height */
      background-color: #ffffff; /* Optional fallback color */
    }
    
    form {
      background: rgba(255, 255, 255, 0.9); /* Transparent white background for better visibility */
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      width: 80%; /* Adjust width as needed */
      max-width: 500px;
      margin: auto; /* Center form */
      position: relative; /* Ensure proper stacking context */
      z-index: 10; /* Place above background */
    }
    

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    input[type="number"], input[type="range"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .slider-value {
      text-align: center;
      font-weight: bold;
    }
    .prize-distribution {
      margin-top: 20px;
      padding: 10px;
      background: #f4f4f4;
      border-radius: 8px;
    }
    .prize-row {
      margin-bottom: 10px;
    }
    .error {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>MTG Turnuva Düzenleyici</h1>
    <!-- Tournament Configuration -->
    <form id="tournament-form">
      <div class="form-group">
        <label for="numPeople">Katılımcı Sayısı:</label>
        <input type="number" id="numPeople" min="0" value="0">
      </div>
      <div class="form-group">
        <label for="numNoProxy">Proxy Kartsız Katılımcı Sayısı:</label>
        <input type="number" id="numNoProxy" min="0" value="0">
      </div>
      <div class="form-group">
        <label for="entryFee">Kişi Başına Giriş Ücreti (₺):</label>
        <input type="number" id="entryFee" step="0.01" min="0" value="0">
      </div>
      <div class="form-group">
        <label for="costPerPerson">Katılım Ödülü Maliyeti (Kişi Başına) (₺):</label>
        <input type="number" id="costPerPerson" step="0.01" min="0" value="0">
      </div>
      <div class="form-group">
        <label for="costNoProxy">Proxy Kullanmayana Ek Ödül Maliyeti (Kişi Başına) (₺):</label>
        <input type="number" id="costNoProxy" step="0.01" min="0" value="0">
      </div>
    </form>
    <div class="form-group">
      <label for="profitSlider">Dükkan Kar Oranı (%):</label>
      <input type="range" id="profitSlider" min="0" max="100" value="50">
      <div class="slider-value" id="profitValue">50%</div>
    </div>

    <!-- Prize Pool Results -->
    <div class="results">
      <p><strong>Toplam Gelir (₺):</strong> <span id="totalGained">0.00</span></p>
      <p><strong>Toplam Gider (₺):</strong> <span id="totalLost">0.00</span></p>
      <p><strong>Net Gelir (₺):</strong> <span id="netGained">0.00</span></p>
      <p><strong>Dükkan Karı (₺):</strong> <span id="netProfit">0.00</span></p>
      <p><strong>Ödül Havuzu (₺):</strong> <span id="prizePool">0.00</span></p>
    </div>

    <!-- Prize Distribution -->
    <div class="prize-distribution">
      <h3>Ödül Dağıtımı</h3>
      <div class="form-group">
        <label for="numWinners">Kaç Kişiye Ödül Verilecek?</label>
        <input type="number" id="numWinners" min="1" value="3">
      </div>
      <div id="winnerSliders"></div>
      <div class="results">
        <p><strong>Toplam Dağıtılan Ödül:</strong> <span id="distributedPrize">0.00</span> ₺</p>
        <p id="errorMsg" class="error" style="display:none;">Hata: Dağılım yüzdesi toplamı 100 olmalıdır!</p>
      </div>
    </div>
  </div>

  <script>
    // Elements
    const numPeopleInput = document.getElementById('numPeople');
    const numNoProxyInput = document.getElementById('numNoProxy');
    const entryFeeInput = document.getElementById('entryFee');
    const costPerPersonInput = document.getElementById('costPerPerson');
    const costNoProxyInput = document.getElementById('costNoProxy');
    const profitSlider = document.getElementById('profitSlider');
    const profitValue = document.getElementById('profitValue');
    const numWinnersInput = document.getElementById('numWinners');
    const winnerSliders = document.getElementById('winnerSliders');
    const errorMsg = document.getElementById('errorMsg');

    const totalGainedSpan = document.getElementById('totalGained');
    const totalLostSpan = document.getElementById('totalLost');
    const netGainedSpan = document.getElementById('netGained');
    const netProfitSpan = document.getElementById('netProfit');
    const prizePoolSpan = document.getElementById('prizePool');
    const distributedPrizeSpan = document.getElementById('distributedPrize');

    function calculate() {
      const numPeople = parseInt(numPeopleInput.value) || 0;
      const numNoProxy = parseInt(numNoProxyInput.value) || 0;
      const entryFee = parseFloat(entryFeeInput.value) || 0;
      const costPerPerson = parseFloat(costPerPersonInput.value) || 0;
      const costNoProxy = parseFloat(costNoProxyInput.value) || 0;
      const profitPercentage = parseInt(profitSlider.value) || 0;

      const totalGained = numPeople * entryFee;
      const totalLost = (numPeople * costPerPerson) + (numNoProxy * costNoProxy);
      const netGained = totalGained - totalLost;
      const netProfit = (netGained * profitPercentage) / 100;
      const prizePool = netGained - netProfit;

      totalGainedSpan.textContent = totalGained.toFixed(2);
      totalLostSpan.textContent = totalLost.toFixed(2);
      netGainedSpan.textContent = netGained.toFixed(2);
      netProfitSpan.textContent = netProfit.toFixed(2);
      prizePoolSpan.textContent = prizePool.toFixed(2);
      profitValue.textContent = `${profitPercentage}%`;

      updatePrizeDistribution(prizePool);
    }

    function updatePrizeDistribution(prizePool) {
      const numWinners = parseInt(numWinnersInput.value) || 1;
      winnerSliders.innerHTML = '';

      let sliders = [];
      let totalPercentage = 0;

      for (let i = 1; i <= numWinners; i++) {
        const row = document.createElement('div');
        row.className = 'prize-row';
        row.innerHTML = `
          <label for="winner${i}">Kazanan ${i}. (%):</label>
          <input type="range" id="winner${i}" min="0" max="100" value="${i === 1 ? 50 : 0}">
          <span id="winnerValue${i}">₺0.00 (0%)</span>
        `;
        winnerSliders.appendChild(row);

        const slider = row.querySelector(`#winner${i}`);
        const output = row.querySelector(`#winnerValue${i}`);

        slider.addEventListener('input', () => {
          totalPercentage = sliders.reduce((sum, s) => sum + parseInt(s.value), 0);

          if (totalPercentage > 100) {
            errorMsg.style.display = 'block';
            return;
          } else {
            errorMsg.style.display = 'none';
          }

          const amount = (prizePool * (slider.value / 100)).toFixed(2);
          output.textContent = `₺${amount} (${slider.value}%)`;
          distributedPrizeSpan.textContent = totalPercentage === 100 ? `${prizePool.toFixed(2)} ₺` : 'Hatalı!';
        });

        sliders.push(slider);
      }
    }

    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', calculate);
    });

    calculate(); // Initial calculation
  </script>
</body>
</html>

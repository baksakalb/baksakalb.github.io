<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MTG Turnuva Düzenleyici</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover; /* Ensures the image covers the screen */
      color: #333;
      height: 100vh; /* Occupy full viewport height */
      display: flex; /* Center the container vertically and horizontally */
      justify-content: center;
      align-items: center;
    }
    .container {
      max-width: 600px;
      margin: 20px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.8); /* Semi-transparent container */
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .form-group1 {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    .form-group1 label {
      flex: 1;
      margin-right: 10px;
      text-align: left;
    }
    .form-group1 input {
      flex: 0 0 150px;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .slider-value {
      text-align: center;
      margin-top: 5px;
    }
    .results, .prize-distribution {
      margin-top: 20px;
    }
    .prize-row {
      margin-bottom: 10px;
    }
    .prize-row label {
      margin-right: 10px;
    }
    .slider-container {
      display: flex;
      align-items: center;
      gap: 10px; /* Space between slider and value */
      width: 100%; /* Ensure the container takes up available space */
    }
    .slider-container input[type="range"] {
      flex: 1; /* Slider grows to fill available space */
    }
    .input-box {
      width: 60px;
      padding: 5px;
      margin-left: 10px;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>MTG Turnuva Düzenleyici</h1>
    <!-- Tournament Configuration -->
    <form id="tournament-form">
      <div class="form-group1">
        <label for="numPeople">Katılımcı Sayısı:</label>
        <input type="number" id="numPeople" step="1" min="0" value="0">
      </div>
      <div class="form-group1">
        <label for="numNoProxy">Proxy Kartsız Katılımcı Sayısı:</label>
        <input type="number" id="numNoProxy" step="1" min="0" value="0">
      </div>
      <div class="form-group1">
        <label for="entryFee">Kişi Başına Giriş Ücreti (₺):</label>
        <input type="number" id="entryFee" step="1" min="0" value="0">
      </div>
      <div class="form-group1">
        <label for="costPerPerson">Katılım Ödülü Maliyeti (Kişi Başına) (₺):</label>
        <input type="number" id="costPerPerson" step="1" min="0" value="0">
      </div>
      <div class="form-group1">
        <label for="costNoProxy">Proxy Kullanmayana Ek Ödül Maliyeti (Kişi Başına) (₺):</label>
        <input type="number" id="costNoProxy" step="1" min="0" value="0">
      </div>
    </form>
    <div class="prize-row">
      <label for="profitSlider">Dükkan Kar Oranı (%):</label>
      <div class="slider-container">
        <input type="range" id="profitSlider" step="1" min="0" max="100" value="50">
        <span class="slider-value" id="profitValue">50%</span>
      </div>
    </div>

    <!-- Prize Pool Results -->
    <div class="results">
      <p><strong>Toplam Gelir (₺):</strong> <span id="totalGained">0.00</span></p>
      <p><strong>Toplam Gider (₺):</strong> <span id="totalLost">0.00</span></p>
      <p><strong>Net Gelir (₺):</strong> <span id="netGained">0.00</span></p>
      <p><strong>Dükkan Karı (₺):</strong> <span id="netProfit">0.00</span></p>
      <p><strong>Ödül Havuzu (₺):</strong> <span id="prizePool">0.00</span></p>
    </div>

    <!-- Prize Distribution -->
    <div class="prize-distribution">
      <h3>Ödül Dağıtımı</h3>
      <div class="form-group1">
        <label for="numWinners">Kaç Kişiye Ödül Verilecek?</label>
        <input type="number" id="numWinners" step="1" min="1" value="3">
      </div>
      <div id="winnerSliders"></div>
      <div class="results">
        <p><strong>Toplam Dağıtılan Ödül:</strong> <span id="distributedPrize">0.00</span> ₺</p>
        <p id="errorMsg" class="error" style="display:none;">Hata: Dağılım yüzdesi toplamı 100 olmalıdır!</p>
      </div>
    </div>
  </div>

  <script>
    // Elements
    const numPeopleInput = document.getElementById('numPeople');
    const numNoProxyInput = document.getElementById('numNoProxy');
    const entryFeeInput = document.getElementById('entryFee');
    const costPerPersonInput = document.getElementById('costPerPerson');
    const costNoProxyInput = document.getElementById('costNoProxy');
    const profitSlider = document.getElementById('profitSlider');
    const profitValue = document.getElementById('profitValue');
    const numWinnersInput = document.getElementById('numWinners');
    const winnerSliders = document.getElementById('winnerSliders');
    const errorMsg = document.getElementById('errorMsg');

    const totalGainedSpan = document.getElementById('totalGained');
    const totalLostSpan = document.getElementById('totalLost');
    const netGainedSpan = document.getElementById('netGained');
    const netProfitSpan = document.getElementById('netProfit');
    const prizePoolSpan = document.getElementById('prizePool');
    const distributedPrizeSpan = document.getElementById('distributedPrize');

    function calculate() {
      const numPeople = parseInt(numPeopleInput.value) || 0;
      const numNoProxy = parseInt(numNoProxyInput.value) || 0;
      const entryFee = parseFloat(entryFeeInput.value) || 0;
      const costPerPerson = parseFloat(costPerPersonInput.value) || 0;
      const costNoProxy = parseFloat(costNoProxyInput.value) || 0;
      const profitPercentage = parseInt(profitSlider.value) || 0;

      const totalGained = numPeople * entryFee;
      const totalLost = (numPeople * costPerPerson) + (numNoProxy * costNoProxy);
      const netGained = totalGained - totalLost;
      const netProfit = (netGained * profitPercentage) / 100;
      const prizePool = netGained - netProfit;

      totalGainedSpan.textContent = totalGained.toFixed(2);
      totalLostSpan.textContent = totalLost.toFixed(2);
      netGainedSpan.textContent = netGained.toFixed(2);
      netProfitSpan.textContent = netProfit.toFixed(2);
      prizePoolSpan.textContent = prizePool.toFixed(2);
      profitValue.textContent = `${profitPercentage}%`;

      updatePrizeDistribution(prizePool);
    }

    function updatePrizeDistribution(prizePool) {
      const numWinners = parseInt(numWinnersInput.value) || 1;
      winnerSliders.innerHTML = '';

      let sliders = [];
      let totalPercentage = 0;

      for (let i = 1; i <= numWinners; i++) {
        const sliderContainer = document.createElement('div');
        sliderContainer.classList.add('prize-row');

        const label = document.createElement('label');
        label.textContent = `Kazanan ${i}:`;

        const slider = document.createElement('input');
        slider.type = 'range';
        slider.min = 0;
        slider.max = 100;
        slider.step = 1;
        slider.value = Math.floor(100 / numWinners);
        totalPercentage += parseInt(slider.value);

        const valueBox = document.createElement('input');
        valueBox.type = 'number';
        valueBox.classList.add('input-box');
        valueBox.value = slider.value;

        slider.oninput = () => {
          valueBox.value = slider.value;
          calculatePrizeDistribution();
        };

        valueBox.oninput = () => {
          slider.value = valueBox.value;
          calculatePrizeDistribution();
        };

        sliderContainer.appendChild(label);
        sliderContainer.appendChild(slider);
        sliderContainer.appendChild(valueBox);
        winnerSliders.appendChild(sliderContainer);

        sliders.push(slider);
      }

      function calculatePrizeDistribution() {
        totalPercentage = sliders.reduce((sum, slider) => sum + parseInt(slider.value), 0);

        if (totalPercentage === 100) {
          errorMsg.style.display = 'none';
          let totalPrizeDistributed = 0;

          sliders.forEach((slider, i) => {
            const prize = (prizePool * parseInt(slider.value)) / 100;
            totalPrizeDistributed += prize;
          });

          distributedPrizeSpan.textContent = totalPrizeDistributed.toFixed(2);
        } else {
          errorMsg.style.display = 'block';
        }
      }

      calculatePrizeDistribution();
    }

    // Event Listeners
    [
      numPeopleInput, numNoProxyInput, entryFeeInput,
      costPerPersonInput, costNoProxyInput, profitSlider,
      numWinnersInput
    ].forEach(input => input.addEventListener('input', calculate));

    // Initialize
    calculate();
  </script>
</body>
</html>
